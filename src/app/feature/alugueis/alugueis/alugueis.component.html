<h1>Alugueis</h1>
<div class="search-container">
  <p-calendar
    [(ngModel)]="dataSelecionada"
    dateFormat="dd/mm/yy"
    [showIcon]="true"
    [showOnFocus]="false"
    inputId="buttondisplay"
    placeholder="Pesquisar por Data"
  ></p-calendar>

  <div class="card flex justify-content-center">
    <p-dropdown
      [options]="modelosOptions"
      [(ngModel)]="modeloSelecionado"
      optionLabel="modelo"
      placeholder="Selecione um modelo"
    />
  </div>

  <p-button label="Buscar" icon="pi pi-search" (onClick)="onSearch()" />
</div>

<p-table [value]="alugueis" [rows]="10" class="custom-table">
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="dataAluguel">
        <span class="sorteable-header"
          >DATA <p-sortIcon field="dataAluguel"></p-sortIcon
        ></span>
      </th>
      <th pSortableColumn="modeloCarro">
        <span class="sorteable-header"
          >MODELO <p-sortIcon field="modeloCarro"></p-sortIcon
        ></span>
      </th>
      <th pSortableColumn="kmCarro">
        KM <p-sortIcon field="kmCarro"></p-sortIcon>
      </th>
      <th pSortableColumn="nomeCliente">
        CLIENTE <p-sortIcon field="nomeCliente"></p-sortIcon>
      </th>
      <th pSortableColumn="telefoneCliente">
        TELEFONE <p-sortIcon field="telefoneCliente"></p-sortIcon>
      </th>
      <th pSortableColumn="dataDevolucao">
        DEVOLUÇÃO <p-sortIcon field="dataDevolucao"></p-sortIcon>
      </th>
      <th pSortableColumn="pago">
        PAGO <p-sortIcon field="pago"></p-sortIcon>
      </th>
      <th pSortableColumn="valor">
        VALOR <p-sortIcon field="valor"></p-sortIcon>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-aluguel>
    <tr>
      <td>{{ aluguel.dataAluguel }}</td>
      <td>{{ aluguel.modeloCarro }}</td>
      <td>{{ aluguel.kmCarro | number : "1.0-0" }}</td>
      <td>{{ aluguel.nomeCliente }}</td>
      <td>{{ aluguel.telefoneCliente }}</td>
      <td>{{ aluguel.dataDevolucao }}</td>
      <td>
        <ng-container *ngIf="aluguel.pago === 'SIM'; else naoPago">
          <p-button label="SIM" [rounded]="true" severity="success"></p-button>
        </ng-container>
        <ng-template #naoPago>
          <p-button label="NÃO" [rounded]="true" severity="danger"></p-button>
        </ng-template>
      </td>
      <td>{{ aluguel.valor | currency : "BRL" : "symbol" : "1.2-2" }}</td>
    </tr>
  </ng-template>
  <ng-template pTemplate="footer">
    <tr>
      <td colspan="7" style="text-align: right">Soma de débitos:</td>
      <td>{{ valorTotalNaoPago | currency : "BRL" : "symbol" : "1.2-2" }}</td>
    </tr>
  </ng-template>
</p-table>
